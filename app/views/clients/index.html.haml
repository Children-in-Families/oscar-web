%input#btn-done{ value: t('.popover_done'), type: 'hidden' }
%input#info{ value: t('.popover_info'), type: 'hidden' }
%input#content{ value: t('.popover_content'), type: 'hidden' }
.row
  .col-xs-12.col-md-9.action-button-group
    %button.btn.btn-primary.query.client-search{"aria-expanded" => 'true', "data-target" => '#client-search-form', "data-toggle" => 'collapse', type: 'button'}
      %i.fa.fa-filter
    = link_to clients_advanced_search_path, class: 'btn btn-primary query client-advance-search', data: { trigger: "hover", html: 'true', content: "#{I18n.t('inline_help.clients.index.buttons.report_builder')}", placement: "right" } do
      = t('.report_builder')

  .col-xs-12.col-md-2
    .pull-right.client-option
      - if can? :manage, Client
        = link_to t('.add_new_client'), new_client_path, class: 'btn btn-primary'

.row
  .col-xs-12
    .ibox-content#client-search-form.collapse
      = datagrid_form_for client_grid, url: clients_url, html: { class: 'grid-form' }, method: :post

- if params['commit'].present?
  .row.mini-margin
    .col-xs-12
      .ibox
        .ibox-title
          %h5= results.size
          %span.label.label-info= t('.results')
          .ibox-tools
            - if params[:data] == 'recent'
              = button_to t('.show_all'), advanced_search_clients_path, params: params.merge({data: 'all'}), class: 'btn btn-primary', form_class: 'hidden-post-form', id: 'show-all'
            - else
              = button_to t('.most_recent'), advanced_search_clients_path, params: params.merge({data: 'recent'}), class: 'btn btn-primary', form_class: 'hidden-post-form', id: 'most-recent'

        .ibox-content
          .clients-table{ data: { 'info-load': t('.load'), 'info-end': t('.end'), 'read-more': t('.read_more'), 'read-less': t('.read_less') } }
            %table.table.table-bordered.table-striped.table-hover.clients#clients-list
              = content_tag :div, 'hidden_param', class: 'hide', id: 'hidden-param', data: { 'hidden-param': url_for(params) }
              %thead
                = datagrid_header(client_grid)
              %tbody.page
                = render 'client_rows'

            %span.hidden{id:"sinfo", 'data-infoshow' => t('.sInfoShow'), 'data-infoto' => t('.sInfoTo'), 'data-infototal' => t('.sInfoTotal')}
        .ibox-footer.text-center
          = paginate client_grid.assets
