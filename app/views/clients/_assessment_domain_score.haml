.modal.fade{ role: 'dialog', tabindex: '-1', id: "assessment-domain-score"}
  .modal-dialog{ role: 'document'}
    .modal-content
      .modal-header
        %button.close{"aria-label" => 'Close', "data-dismiss" => 'modal'}
          %span{"aria-hidden" => 'true'} &times;
        %h4.modal-title
          = t('.assessment_data')

      .modal-body
        - if params['commit'].present? || params['client_advanced_search'].present?
          = link_to current_url(format: 'xls', type: 'assessment_domain_score'), class: 'btn btn-primary btn-export pull-right' do
            %i.fa.fa-download
            = t('.export_to_xls')
        - assessment_domain_hash = {}
        %table.table.table-bordered.table-striped.table-hover
          %thead
            %tr
              %th #
              %th= I18n.t('datagrid.columns.clients.id')
              %th= t('.client_name')
              %th= t('.assessments')
              %th= I18n.t('datagrid.columns.clients.assessments_due_to')
              - Domain.all.each do |domain|
                %th= domain.name
          %tbody.page
            - ordering = 0
            - @client_grid.assets.includes(assessments: :assessment_domains).each do |client|
              - client.assessments.each_with_index do |assessment, index|
                - assessment_domain_hash = assessment.assessment_domains.pluck(:domain_id, :score).to_h if assessment.assessment_domains.present?
                %tr
                  %th{:scope => "row"}= ordering += 1
                  %th= client.slug
                  %td= client.en_and_local_name
                  %td= "Assessment #{index + 1}"
                  %th= date_format(assessment.created_at)
                  - Domain.all.each do |domain|
                    - if assessment_domain_hash.present?
                      %td= assessment_domain_hash[domain.id]
                    - else
                      %td
      .modal-footer
        %button.btn.btn-secondary{"data-dismiss" => "modal", :type => "button"} Close
