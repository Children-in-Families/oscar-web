.row
  .col-xs-12
    .ibox
      .ibox-title
        %h5= t('.advanced-search')
      .ibox-content
        .row
          .col-xs-12.col-md-10
            #builder{ 'data-field-list' => @advanced_search_field, 'data-search-rules' => @advanced_search_params}
      .ibox-footer
        %button#search.btn.btn-primary
          Search
.row
  .col-xs-12
    .ibox
      - if @filtered_clients.present?
        .ibox-title
          %h5= @clients_by_user.size
          %span.label.label-info= t('.results')
        .ibox-content
          .client-advanced-search.table-responsive
            %table.table.table-bordered.table-striped.table-hover.clients.dataTable.no-footer
              %thead
                %tr
                  %th.id-column ID
                  %th Name
                  - @filtered_clients.first.attributes.keys.each do |column_name|
                    - next if column_name == 'slug' || column_name == 'first_name' || column_name == 'id'
                    %th= column_name.titleize
              %tbody
                - @filtered_clients.each do |client|
                  %tr
                    %td.id-column= client.slug
                    %td= link_to client.first_name, client_path(client) 
                    - client.attributes.each do |field_name, value|
                      - next if field_name == 'slug' || field_name == 'first_name' || field_name == 'id'
                      %td= format_advance_search_result(field_name, value)
        .ibox-footer.text-center
          = paginate @filtered_clients
      - else
        .ibox-content
          %span No Result Found
= simple_form_for :client, url: :advanced_search_clients, method: 'GET', html: { id: 'advanced-search' } do |f|
  = f.hidden_field :search_rules
