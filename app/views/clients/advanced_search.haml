.row
  .col-xs-12
    .ibox
      .ibox-title
        .row
          .col-xs-12.col-sm-6
            %h5= t('.advanced_search')
          .col-xs-12.col-sm-6.text-right
            = link_to t('.export_to_xls'), current_url(format: 'xls'), class: "btn btn-info btn-export #{@clients_by_user.present? ? '' : 'disabled'}"
      .ibox-content
        .row
          .col-xs-12
            = render 'advanced_search_column_visibility'
        .row
          .col-xs-12
            #builder{ 'data-search-rules' => @advanced_filter_params, 'data-filter-translation' => t('.add_new_filter')}
      .ibox-footer
        %button#search.btn.btn-primary= t('.search')
        = link_to t('.reset'), advanced_search_clients_path, class: 'btn btn-default'
.row
  .col-xs-12
    .ibox
      - if @clients_by_user.present?
        .ibox-title
          %h5= @clients_by_user.length
          %span.label.label-info= t('.results')
        .ibox-content
          .clients-table
            %table.table.table-bordered.table-striped.table-hover.clients
              %thead
                = datagrid_header(@client_grid)
              %tbody.page
                = render 'client_rows'
        .ibox-footer.text-center
          = paginate @client_grid.assets
      - else
        .ibox-content
          = t('.no_results')
= simple_form_for :client, url: :advanced_search_clients, method: 'GET', html: { id: 'advanced-search' } do |f|
  = f.hidden_field :search_rules
  = f.hidden_field :field_visibility
