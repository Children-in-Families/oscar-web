.panel.panel-default
  .panel-body
    - if @versions.any?
      - @versions.each do |version|
        %div{ class: "panel panel-#{version_color(version.event)}" }
          .panel-heading
            %h5
              - if controller_name == 'data_trackers'
                %span
                  = "#{version.whodunnit} #{t('.change')} #{t('.on')}"
                  = t(".#{version.item_type}")
                  = "##{version.item_id}."
              - else
                %span= "#{version.whodunnit} #{t('.change')}."
              %span{ class: "pull-right label label-#{version_color(version.event)}" }
                = version.event_formated

          .panel-body
            - if version.event == 'delete'
              %table.table.table-hover.row
                %thead
                  %tr
                    %th.col-sm-4= t('.value_of')
                    %th.col-sm-4= t('.before')
                    %th.col-sm-4= t('.after')
                %tbody
                  %tr
                    %td.col-sm-4= t('.id')
                    %td.col-sm-4
                      = version.client_item_type? ? version.reify.slug : version.reify.id
                    %td.col-sm-4
            - else
              %table.table.table-hover.row
                %thead
                  %tr
                    %th.col-sm-4= t('.value_of')
                    %th.col-sm-4= t('.before')
                    %th.col-sm-4= t('.after')
                %tbody
                  - version.changeset.each do |k, v|
                    - next if version_keys_skipable?(k, version.item_type)
                    %tr
                      %td.col-sm-4
                        = version_attribute(k, version.item_type)
                      %td.col-sm-4
                        = version_value_format(v[0], k, v)
                      %td.col-sm-4
                        = version_value_format(v[1], k, v)
    - else
      %p= t('.no_modification')