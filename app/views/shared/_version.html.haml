.panel.panel-default
  .panel-body 
    - if @versions.any?
      - @versions.decorate.each do |version|
        - if version_not_show(version.item_type)
          %div{ class: "panel panel-#{version_color(version.event)}" }
            .panel-heading
              %h5
                - if controller_name == 'data_trackers'
                  %span
                    = "#{version.whodunnit} #{t('.change')} #{t('.on')}"
                    = t(".#{version.item_type}")
                    = "##{version.item_id}."
                - else
                  %span= "#{version.whodunnit} #{t('.change')}."
                %span{ class: "pull-right label label-#{version_color(version.event)}" }
                  = version.event_formated

            .panel-body
              .table-responsive
                - if version.event == 'delete'
                  %table.table.table-hover
                    %thead
                      %tr
                        %th.col-sm-4= t('.value_of')
                        %th.col-sm-4= t('.before')
                        %th.col-sm-4= t('. ')
                    %tbody
                      %tr
                        %td.col-sm-4= t('.id')
                        %td.col-sm-4
                          = version.client_item_type? ? version.reify.slug : version.reify.id
                        %td.col-sm-4
                - else
                  %table.table.table-hover
                    %thead
                      %tr
                        %th.col-sm-4= t('.value_of')
                        %th.col-sm-4.truncate= t('.before')
                        %th.col-sm-4.truncate= t('.after')
                    %tbody
                      - version.changeset.each do |k, v|
                        - next if version_keys_skipable?(k, version.item_type)
                        %tr.get-value
                          %td.col-sm-4.attribute
                            = version_attribute(k, version.item_type)
                          %td.col-sm-4.truncate
                            = version_value_format(v[0], k, v)
                          %td.col-sm-4.truncate
                            = version_value_format(v[1], k, v)
      = render 'shared/assessment'
      = render 'shared/case_note'
      = render 'shared/client'
    - else
      %p= t('.no_modification')
  .panel-footer
    .text-center
      = paginate @versions